<!DOCTYPE html>
<html lang="en">
  <div th:replace="fragments/head :: head"></div>

  <body>
    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
      <div class="loader">
        <svg class="circular" viewBox="25 25 50 50">
          <circle
            class="path"
            cx="50"
            cy="50"
            r="20"
            fill="none"
            stroke-width="3"
            stroke-miterlimit="10"
          />
        </svg>
      </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">
      <!--**********************************
            Nav header start
        ***********************************-->
        <div th:replace="fragments/nav-header:: nav-header"></div>
      <!--**********************************
            Nav header end
        ***********************************-->

      <!--**********************************
            Header start
        ***********************************-->
      <div th:replace="fragments/header :: header"></div>

      <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

      <!--**********************************
            Sidebar start
        ***********************************-->
      <div th:replace="fragments/sidebar :: sidebar"></div>
      <!--**********************************
            Sidebar end
        ***********************************-->

      <!--**********************************
            Content body start
        ***********************************-->
      <div class="content-body">
        <div class="container-fluid mt-3">
          <div class="row">
            <div class="col-lg-12">
              <div class="card">
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-xs mb-0">
                      <thead>
                        <tr>
                          <th>Id</th>
                          <th>Name</th>
                          <th>Email</th>
                          <th>Role</th>
                          <th>Update role</th>
                          <th>is Active</th>
                          <th>Activate</th>
                          <th>Deactivate</th>
                          <th>Update</th>
                          <th>Delete</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr th:each="user : ${users}">
                          <td th:text="${user.id}"></td>
                          <td th:text="${user.name}"></td>
                          <td th:text="${user.email}"></td>
                          <td
                            th:text="${#lists.isEmpty(user.roles) ? 'USER' : user.roles[0].role}"
                          ></td>
                          <td>
                            <form
                              method="post"
                              th:action="@{/accounts/updateRole}"
                            >
                              <select
                                class="form-control"
                                id="roleId"
                                name="newrole"
                                required
                              >
                                <option disabled selected value>
                                  Please select a role
                                </option>
                                <option
                                  th:each="role: ${rolesList}"
                                  th:value="${role.role}"
                                  th:text="${role.role}"
                                ></option>
                              </select>
                              <br />
                              <input
                                type="hidden"
                                name="id"
                                th:value="${user.id}"
                                th:attr="name='id'"
                              />
                              <input
                                class="btn btn-primary"
                                type="submit"
                                value="Update role"
                              />
                            </form>
                          </td>
                          <td th:text="${user.active}"></td>

                          <td>
                            <a
                              th:href="@{/accounts/enable/{id}/{email} (id=${user.id}, email=${user.email})}"
                              >Activer</a
                            >
                          </td>
                          <td>
                            <a
                              th:href="@{/accounts/disable/{id}/{email} (id=${user.id}, email=${user.email})}"
                              >DÃ©sactiver</a
                            >
                          </td>
                          <td>
                            <a
                              th:href="@{/accounts/edit/{id}(id=${user.id})}"
                              class="btn btn-warning"
                              ><i class="fa fa-edit ml-2"></i
                            ></a>
                          </td>
                          <td>
                            <a
                              onclick="return confirm('Confirm deletion please!');"
                              th:href="@{/accounts/delete/{id}(id=${user.id})}"
                              class="btn btn-danger"
                            >
                              <i class="fa fa-trash ml-2"></i
                            ></a>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- #/ container -->
      </div>
      <!--**********************************
            Content body end
        ***********************************-->

      <!--**********************************
            Footer start
        ***********************************-->
      <div class="footer">
        <div class="copyright">
          <p>
            Copyright &copy; Designed & Developed by
            <a href="https://themeforest.net/user/quixlab">Quixlab</a> 2018
          </p>
        </div>
      </div>
      <!--**********************************
            Footer end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <script th:src="@{/front/plugins/common/common.min.js}"></script>
    <script th:src="@{/front/js/custom.min.js}"></script>
    <script th:src="@{/front/js/settings.js}"></script>
    <script th:src="@{/front/js/gleek.js}"></script>
    <script th:src="@{/front/js/styleSwitcher.js}"></script>

    <!-- Chartjs -->
    <script th:src="@{/front/plugins/chart.js/Chart.bundle.min.js}"></script>
    <!-- Circle progress -->
    <script
      th:src="@{/front/plugins/circle-progress/circle-progress.min.js}"
    ></script>
    <!-- Datamap -->
    <script th:src="@{/front/plugins/d3v3/index.js}"></script>
    <script th:src="@{/front/plugins/topojson/topojson.min.js}"></script>
    <script th:src="@{/front/plugins/datamaps/datamaps.world.min.js}"></script>
    <!-- Morrisjs -->
    <script th:src="@{/front/plugins/raphael/raphael.min.js}"></script>
    <script th:src="@{/front/plugins/morris/morris.min.js}"></script>
    <!-- Pignose Calender -->
    <script th:src="@{/front/plugins/moment/moment.min.js}"></script>
    <script
      th:src="@{/front/plugins/pg-calendar/js/pignose.calendar.min.js}"
    ></script>
    <!-- ChartistJS -->
    <script th:src="@{/front/plugins/chartist/js/chartist.min.js}"></script>
    <script
      th:src="@{/front/plugins/chartist-plugin-tooltips/js/chartist-plugin-tooltip.min.js}"
    ></script>

    <script th:src="@{/front/js/dashboard/dashboard-1.js}"></script>
  </body>
</html>
